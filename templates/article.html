{% extends "base.html" %}

{% block content %}

<div class="container">
    <h2>{{ article.title }}</h2>

    <p class="meta">
        <b>{{ article.source }}</b> Â· {{ article.author }} Â· 
        {{ article.published_at[:10] if article.published_at else "" }}
    </p>

    <hr>

    <div class="full-article">
        {% if full_text %}
            <p>{{ full_text | safe }}</p>
        {% else %}
            <p>âš ï¸ Unable to load article content.</p>
        {% endif %}
    </div>

    <form action="{{ url_for('like_article', article_id=article.id) }}" method="POST">
        <button class="btn">ğŸ‘ Like Article</button>
    </form>

    <form action="{{ url_for('rate_article', article_id=article.id) }}" method="POST">
        <label>Rate this article:</label>
        <input type="number" name="rating" min="1" max="10" required value="{{ ua.rating if ua else '' }}">
        <button class="btn">Save Rating</button>
    </form>

    <form action="{{ url_for('save_notes', article_id=article.id) }}" method="POST">
        <label>Your notes:</label><br>
        <textarea name="notes" rows="3">{{ ua.notes if ua else '' }}</textarea><br>
        <button class="btn">Save Notes</button>
    </form>

    <br>
    <a href="{{ url_for('open_original', article_id=article.id) }}" target="_blank">
        ğŸ”— Open Original Article
    </a>

    <br><br>
    <a href="{{ url_for('digest') }}" class="btn">â† Back to Digest</a>
</div>

{% endblock %}
